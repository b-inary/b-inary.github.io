<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An open-source postflop solver library."><title>postflop_solver - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-fa3bb1812debf86c.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="postflop_solver" data-themes="" data-resource-suffix="" data-rustdoc-version="1.74.0-nightly (8ce4540bd 2023-09-29)" data-channel="nightly" data-search-js="search-8be46b629f5f14a8.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-c5bd66d33317d69f.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../postflop_solver/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a></nav><nav class="sidebar"><a class="logo-container" href="../postflop_solver/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate postflop_solver</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Aliases</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">postflop_solver</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/postflop_solver/lib.rs.html#1-89">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An open-source postflop solver library.</p>
<h2 id="examples"><a href="#examples">Examples</a></h2>
<p>See the <a href="https://github.com/b-inary/postflop-solver/tree/main/examples">examples</a> directory.</p>
<h2 id="implementation-details"><a href="#implementation-details">Implementation details</a></h2>
<ul>
<li><strong>Algorithm</strong>: The solver uses the state-of-the-art <a href="https://arxiv.org/abs/1809.04040">Discounted CFR</a> algorithm.
Currently, the value of γ is set to 3.0 instead of the 2.0 recommended in the original paper.
Also, the solver resets the cumulative strategy when the number of iterations is a power of 4.</li>
<li><strong>Performance</strong>: The solver engine is highly optimized for performance with maintainable code.
The engine supports multithreading by default, and it takes full advantage of unsafe Rust in hot spots.
The developer reviews the assembly output from the compiler and ensures that SIMD instructions are used as much as possible.
Combined with the algorithm described above, the performance surpasses paid solvers such as PioSOLVER and GTO+.</li>
<li><strong>Isomorphism</strong>: The solver does not perform any abstraction.
However, isomorphic chances (turn and river deals) are combined into one.
For example, if the flop is monotone, the three non-dealt suits are isomorphic,
allowing us to skip the calculation for two of the three suits.</li>
<li><strong>Precision</strong>: 32-bit floating-point numbers are used in most places.
When calculating summations, temporary values use 64-bit floating-point numbers.
There is also a compression option where each game node stores the values
by 16-bit integers with a single 32-bit floating-point scaling factor.</li>
<li><strong>Bunching effect</strong>: At the time of writing, this is the only implementation that can handle the bunching effect.
It supports up to four folded players (6-max game).
The implementation correctly counts the number of card combinations and does not rely on heuristics
such as manipulating the probability distribution of the deck.
Note, however, that enabling the bunching effect increases the time complexity
of the evaluation at the terminal nodes and slows down the computation significantly.</li>
</ul>
<h2 id="crate-features"><a href="#crate-features">Crate features</a></h2>
<ul>
<li><code>bincode</code>: Uses <a href="https://github.com/bincode-org/bincode">bincode</a> crate (2.0.0-rc.3) to serialize and deserialize the <code>PostFlopGame</code> struct.
This feature is required to save and load the game tree.
Enabled by default.</li>
<li><code>custom-alloc</code>: Uses custom memory allocator in solving process (only available in nightly Rust).
It significantly reduces the number of calls of the default allocator,
so it is recommended to use this feature when the default allocator is not so efficient.
Note that this feature assumes that, at most, only one instance of <code>PostFlopGame</code> is available
when solving in a program.
Disabled by default.</li>
<li><code>rayon</code>: Uses <a href="https://github.com/rayon-rs/rayon">rayon</a> crate for parallelization.
Enabled by default.</li>
<li><code>zstd</code>: Uses <a href="https://github.com/gyscos/zstd-rs">zstd</a> crate to compress and decompress the game tree.
This feature is required to save and load the game tree with compression.
Disabled by default.</li>
</ul>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ActionTree.html" title="struct postflop_solver::ActionTree">ActionTree</a></div><div class="desc docblock-short">A struct representing an abstract game tree.</div></li><li><div class="item-name"><a class="struct" href="struct.BetSizeOptions.html" title="struct postflop_solver::BetSizeOptions">BetSizeOptions</a></div><div class="desc docblock-short">Bet size options for the first bets and raises.</div></li><li><div class="item-name"><a class="struct" href="struct.BunchingData.html" title="struct postflop_solver::BunchingData">BunchingData</a></div><div class="desc docblock-short">A configuration for computing the bunching effect.</div></li><li><div class="item-name"><a class="struct" href="struct.CardConfig.html" title="struct postflop_solver::CardConfig">CardConfig</a></div><div class="desc docblock-short">A struct containing the card configuration.</div></li><li><div class="item-name"><a class="struct" href="struct.DonkSizeOptions.html" title="struct postflop_solver::DonkSizeOptions">DonkSizeOptions</a></div><div class="desc docblock-short">Bet size options for the donk bets.</div></li><li><div class="item-name"><a class="struct" href="struct.MutexGuardLike.html" title="struct postflop_solver::MutexGuardLike">MutexGuardLike</a></div><div class="desc docblock-short">Smart pointer like wrapper that is returned when <a href="struct.MutexLike.html" title="struct postflop_solver::MutexLike"><code>MutexLike</code></a> is “locked”.</div></li><li><div class="item-name"><a class="struct" href="struct.MutexLike.html" title="struct postflop_solver::MutexLike">MutexLike</a></div><div class="desc docblock-short">Mutex-like wrapper, but it actually does not perform any locking.</div></li><li><div class="item-name"><a class="struct" href="struct.PostFlopGame.html" title="struct postflop_solver::PostFlopGame">PostFlopGame</a></div><div class="desc docblock-short">A struct representing a postflop game.</div></li><li><div class="item-name"><a class="struct" href="struct.PostFlopNode.html" title="struct postflop_solver::PostFlopNode">PostFlopNode</a></div><div class="desc docblock-short">A struct representing a node in a postflop game tree.</div></li><li><div class="item-name"><a class="struct" href="struct.Range.html" title="struct postflop_solver::Range">Range</a></div><div class="desc docblock-short">A struct representing a player’s range.</div></li><li><div class="item-name"><a class="struct" href="struct.TreeConfig.html" title="struct postflop_solver::TreeConfig">TreeConfig</a></div><div class="desc docblock-short">A struct containing the game tree configuration.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Action.html" title="enum postflop_solver::Action">Action</a></div><div class="desc docblock-short">Available actions of the postflop game.</div></li><li><div class="item-name"><a class="enum" href="enum.BetSize.html" title="enum postflop_solver::BetSize">BetSize</a></div><div class="desc docblock-short">Bet size specification.</div></li><li><div class="item-name"><a class="enum" href="enum.BoardState.html" title="enum postflop_solver::BoardState">BoardState</a></div><div class="desc docblock-short">An enum representing the board state.</div></li></ul><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.NOT_DEALT.html" title="constant postflop_solver::NOT_DEALT">NOT_DEALT</a></div><div class="desc docblock-short">Constant representing that the card is not yet dealt.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.FileData.html" title="trait postflop_solver::FileData">FileData</a></div><div class="desc docblock-short">A trait for data that can be saved into a file.</div></li><li><div class="item-name"><a class="trait" href="trait.Game.html" title="trait postflop_solver::Game">Game</a></div><div class="desc docblock-short">The trait representing a game.</div></li><li><div class="item-name"><a class="trait" href="trait.GameNode.html" title="trait postflop_solver::GameNode">GameNode</a></div><div class="desc docblock-short">The trait representing a node in game tree.</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.card_from_chars.html" title="fn postflop_solver::card_from_chars">card_from_chars</a></div><div class="desc docblock-short">Attempts to read the next card from a char iterator.</div></li><li><div class="item-name"><a class="fn" href="fn.card_from_str.html" title="fn postflop_solver::card_from_str">card_from_str</a></div><div class="desc docblock-short">Attempts to convert a string into a card.</div></li><li><div class="item-name"><a class="fn" href="fn.card_to_string.html" title="fn postflop_solver::card_to_string">card_to_string</a></div><div class="desc docblock-short">Attempts to convert a card into a string.</div></li><li><div class="item-name"><a class="fn" href="fn.compute_average.html" title="fn postflop_solver::compute_average">compute_average</a></div><div class="desc docblock-short">Computes the average with given weights.</div></li><li><div class="item-name"><a class="fn" href="fn.compute_current_ev.html" title="fn postflop_solver::compute_current_ev">compute_current_ev</a></div><div class="desc docblock-short">Computes the expected values of the current strategy of each player.</div></li><li><div class="item-name"><a class="fn" href="fn.compute_exploitability.html" title="fn postflop_solver::compute_exploitability">compute_exploitability</a></div><div class="desc docblock-short">Computes the exploitability of the current strategy.</div></li><li><div class="item-name"><a class="fn" href="fn.compute_mes_ev.html" title="fn postflop_solver::compute_mes_ev">compute_mes_ev</a></div><div class="desc docblock-short">Computes the expected values of the MES (Maximally Exploitative Strategy) of each player.</div></li><li><div class="item-name"><a class="fn" href="fn.finalize.html" title="fn postflop_solver::finalize">finalize</a></div><div class="desc docblock-short">Finalizes the solving process.</div></li><li><div class="item-name"><a class="fn" href="fn.flop_from_str.html" title="fn postflop_solver::flop_from_str">flop_from_str</a></div><div class="desc docblock-short">Attempts to convert an optionally space-separated string into a sorted flop array.</div></li><li><div class="item-name"><a class="fn" href="fn.hole_to_string.html" title="fn postflop_solver::hole_to_string">hole_to_string</a></div><div class="desc docblock-short">Attempts to convert hole cards into a string.</div></li><li><div class="item-name"><a class="fn" href="fn.holes_to_strings.html" title="fn postflop_solver::holes_to_strings">holes_to_strings</a></div><div class="desc docblock-short">Attempts to convert a list of hole cards into a list of strings.</div></li><li><div class="item-name"><a class="fn" href="fn.load_data_from_file.html" title="fn postflop_solver::load_data_from_file">load_data_from_file</a></div><div class="desc docblock-short">Loads data from a file.</div></li><li><div class="item-name"><a class="fn" href="fn.load_data_from_std_read.html" title="fn postflop_solver::load_data_from_std_read">load_data_from_std_read</a></div><div class="desc docblock-short">Loads data from a standard reader.</div></li><li><div class="item-name"><a class="fn" href="fn.save_data_into_std_write.html" title="fn postflop_solver::save_data_into_std_write">save_data_into_std_write</a></div><div class="desc docblock-short">Saves data into a standard writer.</div></li><li><div class="item-name"><a class="fn" href="fn.save_data_to_file.html" title="fn postflop_solver::save_data_to_file">save_data_to_file</a></div><div class="desc docblock-short">Saves data into a file.</div></li><li><div class="item-name"><a class="fn" href="fn.solve.html" title="fn postflop_solver::solve">solve</a></div><div class="desc docblock-short">Performs Discounted CFR algorithm until the given number of iterations or exploitability is
satisfied.</div></li><li><div class="item-name"><a class="fn" href="fn.solve_step.html" title="fn postflop_solver::solve_step">solve_step</a></div><div class="desc docblock-short">Proceeds Discounted CFR algorithm for one iteration.</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Aliases</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Card.html" title="type postflop_solver::Card">Card</a></div><div class="desc docblock-short">A type representing a card, defined as an alias of <code>u8</code>.</div></li></ul></section></div></main></body></html>